# Does climate region in the us influences power outages ?
Using the dataset furnished in Data on major power outage events in the continental U.S. at the [adress](https://www.sciencedirect.com/science/article/pii/S2352340918307182), we will try to understand if major power outages are related to the climate region of the US.

## Introduction
> The dataset we are considering here describes various information about major outtage patterns, and characteristics of the states in the continental U.S , including their climate and topographical characteristics, electricity consumption patterns, population, and land-cover characteristics.
This data will be used to answer the following questoin : Are the major outtages distributed according to the climate of the region considered in the country.
The dataset contains 56 rows. We will look in particular at a few ones which are the YEAR, the MONTH, the CLIMATE.REGION, the CLIMATE.CATEGORY which states if it's warm, cold, or normal, the ANOMALY.LEVEL which states the el Nino level, the CAUSE.CATEGORY describing the category of the event causing the major power outages, the POPDEN_UC (persons per square mile) the population density of the urban clusters, the U.S._STATE, the DEMAND.LOSS.MW (Megawatt) describing the amount of peak demand lost during an outage event , CUSTOMERS.AFFECTED counting the number of customers affected by the power outage event, and OUTAGE.RESTORATION.TIME wich is the moment of outage restoration event.
.


## Cleaning and EDA
> At first the dataframe didn't even look like a dataframe, the columns didn't have any title, some columns were all null and then some values appearede in these columns.
-  We first found the columns title and put them at their right place and deleted the empty lines. 
- We normalize percentage columns to make it easier to read and indicate in the columns titles the different densities when needed.
- we merged the time columns that were redondant and created just one out of each.

```py
print(pow_outage[['YEAR', 'MONTH', 'OUTAGE.START.DATE (Day of the week, Month Day, Year)', 'OUTAGE.START.TIME (Hour:Minute:Second (AM / PM))', 'ANOMALY.LEVEL (numeric)', 'CAUSE.CATEGORY', 'POPDEN_UC (persons per square mile)', 'U.S._STATE', 'CLIMATE.REGION', 'CLIMATE.CATEGORY', 'CAUSE.CATEGORY', 'CUSTOMERS.AFFECTED', ]].head().to_markdown(index=False))
```

|   YEAR |   MONTH | OUTAGE.START        | OUTAGE.RESTORATION.TIME   |   ANOMALY.LEVEL (numeric) | CAUSE.CATEGORY     |   POPDEN_UC (persons per square mile) | U.S._STATE   | CLIMATE.REGION     | CLIMATE.CATEGORY   | CAUSE.CATEGORY     |   CUSTOMERS.AFFECTED |
|-------:|--------:|:--------------------|:--------------------------|--------------------------:|:-------------------|--------------------------------------:|:-------------|:-------------------|:-------------------|:-------------------|---------------------:|
|   2011 |       7 | 2011-07-01 17:00:00 | 2011-07-03 20:00:00       |                      -0.3 | severe weather     |                                1700.5 | Minnesota    | East North Central | normal             | severe weather     |                70000 |
|   2014 |       5 | 2014-05-11 18:38:00 | 2014-05-11 18:39:00       |                      -0.1 | intentional attack |                                1700.5 | Minnesota    | East North Central | normal             | intentional attack |                  nan |
|   2010 |      10 | 2010-10-26 20:00:00 | 2010-10-28 22:00:00       |                      -1.5 | severe weather     |                                1700.5 | Minnesota    | East North Central | cold               | severe weather     |                70000 |
|   2012 |       6 | 2012-06-19 04:30:00 | 2012-06-20 23:00:00       |                      -0.1 | severe weather     |                                1700.5 | Minnesota    | East North Central | normal             | severe weather     |                68200 |
|   2015 |       7 | 2015-07-18 02:00:00 | 2015-07-19 07:00:00       |                       1.2 | severe weather     |                                1700.5 | Minnesota    | East North Central | warm               | severe weather     |               250000 |


### Univariate Analysis

<iframe src="assets/Cause category count.html" width=800 height=600 frameBorder=0></iframe>

This figure inform us about the number of each cause of power outtage. 
As we can see, the main reasin in the US of power outtage is due to severe weather. Then we have intentional attacks that is half proportion of the first one.
The other categories are much smaller compared to these two.

### Bivariate Analysis

<iframe src="assets/Anomaly-level-per-month.html" width=800 height=600 frameBorder=0></iframe>
This display the anomaly level in terms of months. We notice that colder it is, the more extreme value el Nino takes. 

<iframe src="assets/Mean Anomaly level per U.S State.html" width=800 height=600 frameBorder=0></iframe>
Finally, here we can see the mean anomaly value per state. We notice, obviously, that warm states have a higher anomaly level (like Kansa or Texas), and on the other hand colder countries have a lower anomaly level (like North Dakota).

### Interesting Aggregates

|   ('ANOMALY.LEVEL (numeric)', 'equipment failure') |   ('ANOMALY.LEVEL (numeric)', 'fuel supply emergency') |   ('ANOMALY.LEVEL (numeric)', 'intentional attack') |   ('ANOMALY.LEVEL (numeric)', 'islanding') |   ('ANOMALY.LEVEL (numeric)', 'public appeal') |   ('ANOMALY.LEVEL (numeric)', 'severe weather') |   ('ANOMALY.LEVEL (numeric)', 'system operability disruption') |   ('DEMAND.LOSS.MW (Megawatt)', 'equipment failure') |   ('DEMAND.LOSS.MW (Megawatt)', 'fuel supply emergency') |   ('DEMAND.LOSS.MW (Megawatt)', 'intentional attack') |   ('DEMAND.LOSS.MW (Megawatt)', 'islanding') |   ('DEMAND.LOSS.MW (Megawatt)', 'public appeal') |   ('DEMAND.LOSS.MW (Megawatt)', 'severe weather') |   ('DEMAND.LOSS.MW (Megawatt)', 'system operability disruption') |
|---------------------------------------------------:|-------------------------------------------------------:|----------------------------------------------------:|-------------------------------------------:|-----------------------------------------------:|------------------------------------------------:|---------------------------------------------------------------:|-----------------------------------------------------:|---------------------------------------------------------:|------------------------------------------------------:|---------------------------------------------:|-------------------------------------------------:|--------------------------------------------------:|-----------------------------------------------------------------:|
|                                         -0.878947  |                                              -0.831579 |                                           -0.740984 |                                  -1.06667  |                                      -0.809091 |                                       -0.791213 |                                                      -0.913514 |                                              483.286 |                                                  743.636 |                                              0.537037 |                                      25.4667 |                                          61.6667 |                                           543.752 |                                                          600.029 |
|                                         -0.0857143 |                                              -0.15     |                                           -0.209735 |                                  -0.2      |                                      -0.120588 |                                       -0.070904 |                                                      -0.174576 |                                              352.5   |                                                  393     |                                             16.3372   |                                    1190.08   |                                         560.25   |                                           612.185 |                                                         1387.86  |
|                                          0.7       |                                               1.28     |                                            1.33857  |                                   0.914286 |                                       0.9      |                                        1.00783  |                                                       0.986667 |                                              352.143 |                                                  165.2   |                                              5.75556  |                                      66.9167 |                                       41788      |                                           733.281 |                                                          317.65  |

> It seems that when the weather is hot, which is linked to el Nino (Anomaly level), the public appeal, the weather and the system operation disruption have very high anomaly level when it's warm. 
From the perspective of the demand loss, we notice that there is a high level of fuel supply emergency and equipment failure when it's cold, and a very high public appeal againn when it's hot.

Here wheather tend to have an impact on cause categories of power outages. Let's see if the year, with the global warming, seems to have an impact also. 

|   ('ANOMALY.LEVEL (numeric)', 'equipment failure') |   ('ANOMALY.LEVEL (numeric)', 'fuel supply emergency') |   ('ANOMALY.LEVEL (numeric)', 'intentional attack') |   ('ANOMALY.LEVEL (numeric)', 'islanding') |   ('ANOMALY.LEVEL (numeric)', 'public appeal') |   ('ANOMALY.LEVEL (numeric)', 'severe weather') |   ('ANOMALY.LEVEL (numeric)', 'system operability disruption') |   ('DEMAND.LOSS.MW (Megawatt)', 'equipment failure') |   ('DEMAND.LOSS.MW (Megawatt)', 'fuel supply emergency') |   ('DEMAND.LOSS.MW (Megawatt)', 'intentional attack') |   ('DEMAND.LOSS.MW (Megawatt)', 'islanding') |   ('DEMAND.LOSS.MW (Megawatt)', 'public appeal') |   ('DEMAND.LOSS.MW (Megawatt)', 'severe weather') |   ('DEMAND.LOSS.MW (Megawatt)', 'system operability disruption') |
|---------------------------------------------------:|-------------------------------------------------------:|----------------------------------------------------:|-------------------------------------------:|-----------------------------------------------:|------------------------------------------------:|---------------------------------------------------------------:|-----------------------------------------------------:|---------------------------------------------------------:|------------------------------------------------------:|---------------------------------------------:|-------------------------------------------------:|--------------------------------------------------:|-----------------------------------------------------------------:|
|                                         -0.6       |                                             nan        |                                           -0.9      |                                 nan        |                                    nan         |                                      -0.83      |                                                     -0.86      |                                              106.6   |                                                   nan    |                                             nan       |                                     nan      |                                         nan      |                                           339.667 |                                                          523.333 |
|                                         -0.1       |                                             nan        |                                          nan        |                                 nan        |                                     -0.266667  |                                      -0.1       |                                                     -0.38      |                                              nan     |                                                   nan    |                                             nan       |                                     nan      |                                         466.667  |                                           nan     |                                                          352.5   |
|                                        nan         |                                             nan        |                                            0.2      |                                 nan        |                                    nan         |                                       0.816667  |                                                      0.533333  |                                              nan     |                                                   nan    |                                               0       |                                     nan      |                                         nan      |                                           252.111 |                                                          157     |
|                                          0.133333  |                                             nan        |                                            0.45     |                                 nan        |                                     -0.1       |                                       0.203333  |                                                      0.157143  |                                              385.333 |                                                   nan    |                                               0       |                                     nan      |                                           0      |                                           872.593 |                                                         7663.71  |
|                                          0.44      |                                             nan        |                                          nan        |                                 nan        |                                      0.285714  |                                       0.473214  |                                                      0.4       |                                              315.75  |                                                   nan    |                                             nan       |                                     nan      |                                          38.3333 |                                          1027.83  |                                                          186.667 |
|                                          0.0333333 |                                               0.2      |                                          nan        |                                 nan        |                                    nan         |                                       0.0574468 |                                                     -0.05      |                                             1056     |                                                     0    |                                             nan       |                                     nan      |                                         nan      |                                           636.667 |                                                          422.333 |
|                                          0.9       |                                             nan        |                                          nan        |                                 nan        |                                      0.2       |                                       0.224074  |                                                     -0.0222222 |                                              220     |                                                  1650    |                                             nan       |                                     nan      |                                          57.5    |                                           326.027 |                                                          331.444 |
|                                         -0.416667  |                                              -0.833333 |                                          nan        |                                  -0.9      |                                     -0.5       |                                      -0.4425    |                                                     -0.575     |                                              329     |                                                     0    |                                             nan       |                                      50      |                                         nan      |                                           331.174 |                                                          319.75  |
|                                         -0.866667  |                                              -0.575    |                                          nan        |                                  -0.8      |                                     -0.5       |                                      -0.594737  |                                                     -0.864286  |                                              695     |                                                   250    |                                             nan       |                                      24.1667 |                                          52.5    |                                           522.881 |                                                          448.071 |
|                                          0.25      |                                              -0.133333 |                                          nan        |                                   0.475    |                                      0.39      |                                       0.0755556 |                                                      0.15      |                                              305.667 |                                                   300    |                                             nan       |                                     114.5    |                                         350      |                                           295.63  |                                                          184.8   |
|                                         -0.54      |                                              -1.26667  |                                          nan        |                                  -1.07778  |                                     -0.728571  |                                      -0.329032  |                                                     -0.192308  |                                              206.5   |                                                   300    |                                             nan       |                                      17.5714 |                                          59.6667 |                                           435.174 |                                                          503.667 |
|                                         -0.7       |                                              -0.766667 |                                           -0.657851 |                                  -0.633333 |                                     -0.45      |                                      -0.625234  |                                                     -0.666667  |                                              283.25  |                                                   533.5  |                                               9.79167 |                                      35.3333 |                                         933.6    |                                           308.233 |                                                         1293.75  |
|                                         -0.4       |                                               0.1      |                                           -0.201124 |                                  -0.075    |                                     -0.0333333 |                                       0.0738462 |                                                     -0.242857  |                                              nan     |                                                   953    |                                               5.57447 |                                       3      |                                          45      |                                           819.429 |                                                          133.333 |
|                                         -0.275     |                                              -0.3      |                                           -0.28375  |                                  -0.257143 |                                    nan         |                                      -0.277551  |                                                     -0.283333  |                                              170.75  |                                                   198    |                                              41.5455  |                                    2371.5    |                                         nan      |                                           427.4   |                                                          160     |
|                                        nan         |                                              -0.361538 |                                           -0.321277 |                                  -0.4      |                                     -0.5       |                                      -0.335556  |                                                     -0.2       |                                              nan     |                                                  1062.67 |                                              10       |                                     nan      |                                         nan      |                                          2472.33  |                                                          163     |
|                                        nan         |                                               1.1      |                                            1.2186   |                                   0.966667 |                                      1.6       |                                       1.38125   |                                                      1.18462   |                                              nan     |                                                   338    |                                               2.59091 |                                      42.375  |                                       41788      |                                           314     |                                                          337.625 |
|                                        nan         |                                               1.4      |                                            1.19697  |                                   1.3      |                                    nan         |                                       0.725     |                                                      0.255556  |                                              nan     |                                                    50    |                                               6.73333 |                                       7      |                                         nan      |                                           300     |                                                          294.167 |


> First, we notice lots of missing values.
Then we can see that the anomaly level tends to increase every year (except for the system operation disruption). 
It is hard to conclude something about demand loss as the data has a lot of missingness an d no real patterns, with sometimes extrem variation. For example in 2015 we have 338.000000 fuel supply emergency and the next year 50.000000. Again the system operatino disruption do not appear as being touched by this.

## Assessment of Missingness

### NMAR Analysis
> The column HURRICANE.NAMES is NMAR. This is due to the fact that hurricanes are not the cause of every power outtages. Therefore the information is not missig at random, it is missing because it is missing in real life.

### Missingness Dependency
> We recall our initial question is "are the major outtages distributed according to the climate of the region considered in the country?". 

We will consider, for our MCAR test, the column CUSTOMERS.AFFECTED and see it's distribution when missing or not with the column of postal code. Here is the representation : 
<iframe src="assets/Postal Code by Missingness of Customer affected.html" width=800 height=600 frameBorder=0></iframe>
As we can see both are, as it seems, not related.

Then let's consider the empirical distribution of the test statistic we performed, along with the observed statistics.
<iframe src="assets/Empirical-distribution-of-the-TVD-for-the-Customer-affected-columns.html" width=800 height=600 frameBorder=0></iframe>
These informations, on the second plot, allow us to conclude that the column CUSTOMERS.AFFECTED is MCAR.

For the case of MAR, we consider the column OUTAGE.RESTORATION.TIME. This one is likely to be MAR. Let's look at it's distributions : 
<iframe src="assets/Postal Code by Missingness of outage restoration time.html" width=800 height=600 frameBorder=0></iframe>
<iframe src="assets/Empirical-distribution-of-the-TVD-for-the-outage-restoration-time-columns.html" width=800 height=600 frameBorder=0></iframe>
By using the same analysis as on the previous case, wa can conclude this columns is MAR.


## Hypothesis Testing
We are trying to determine if the major outages occurs accordingly to the region where it happens.
For that let's look at the distribution of power outages per climate region. For that we will perform a hypothesis test:
- Null Hypothesis: major power outages and climate region are related 
- Alternative Hypothesis: major power outages and climate region are not related according to the distribution shown below
- Observation: power outages
- Sample : distribution of the power outtages per climate region
- Test Statistic: mean
- p_val = 0.05


This test will allow us to tell if climate might be related or not to power outtages that happens in the US. Let's take a look to the results.

<iframe src="assets/Empirical-Distribution-of-the-mean-of-power-outtage.html" width=800 height=600 frameBorder=0></iframe>

As we can see, we can not reject the null hypothesis. Therefore, the power outages may be dependent of the area of the country.

## Conclusion

After these few obesrvation, where we have compared climate over power outtages in differents ways, we can conclude that there actually seem to be a link between these two fact. This final conclusion is made by the last part with the hypothesis testing.
Furtermore, it would be interesting to relate the cause of outtages power by climate, this could allow us to confirm the previous result and, according to that we could also look at how long it takes to restore the damages and see if each state country is as efficient compared to other or not.